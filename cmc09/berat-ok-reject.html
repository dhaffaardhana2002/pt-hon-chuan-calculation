<html>
	<head>
		<title>PT. Hon Chuan Calculation</title>
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
		<link rel="stylesheet" href="../style.css">
		<link rel="stylesheet" href="../calculation.css">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui">	
	</head>
	<body>
		<header>
			<a href="./">
				<i class="bi bi-arrow-left"></i>
			</a>
			<h1>Berat OK & Reject CMC-09</h1>
		</header>
		<main>
			<section id="location">
				<a href="../">Home</a> > <a href="../capshield.html">Cap Shield</a> > <a href="./">CMC-09</a> > Berat OK & Reject
			</section>

			<section id="main-content">
				<section id="info">
					<h4>Information</h4>
					<table>
						<tr>
							<td>Mesin</td>
							<td>:</td>
							<td>
								<select name="mesin" id="mesin">
									<!-- <option value="cmc08">CMC-08</option> -->
									<option value="cmc09">CMC-09</option>
								</select>
							</td>
						</tr>
						<tr>
							<td><label for="satuan_pcs">Berat satuan pcs</label></td>
							<td>:</td>
							<td><input type="number" name="satuan_pcs" id="satuan_pcs" value="10.682"></td>
						</tr>
					</table>
				</section>
	
				<section id="calculations">
					<details open> <!-- OK -->
						<summary><strong>Berat OK</strong></summary>
						<div>
							<table>
								<tr>
									<td><label for="ok_pcs">Pcs</label></td>
									<td>:</td>
									<td><input type="number" name="ok_pcs" id="ok_pcs" min="0"></td>
								</tr>
								<tr>
									<td><label for="ok_kg">Kg</label></td>
									<td>:</td>
									<td><input type="number" name="ok_kg" id="ok_kg" min="0"></td>
								</tr>
							</table>
							<br>
							<table>
								<tr>
									<td>HDPE (63,720%)</td>
									<td>:</td>
									<td><span id="ok_hdpe">N/A</span></td>
								</tr>
								<tr>
									<td>LDPE (34,319%)</td>
									<td>:</td>
									<td><span id="ok_ldpe">N/A</span></td>
								</tr>
								<tr>
									<td>MB Putih (1,471%)</td>
									<td>:</td>
									<td><span id="ok_mbputih">N/A</span></td>
								</tr>
								<tr>
									<td>MB Biru (0,490%)</td>
									<td>:</td>
									<td><span id="ok_mbbiru">N/A</span></td>
								</tr>
							</table>
						</div>
					</details>
					<details open> <!-- Reject -->
						<summary><strong>Berat Reject</strong></summary>
						<div>
							<table>
								<tr>
									<td><label for="reject_kg">Kg</label></td>
									<td>:</td>
									<td><input type="number" name="reject_kg" id="reject_kg" min="0"></td>
								</tr>
								<tr>
									<td><label for="reject_pcs">Pcs</label></td>
									<td>:</td>
									<td><input type="number" name="reject_pcs" id="reject_pcs" min="0"></td>
								</tr>
							</table>
							<br>	
							<table>
								<tr>
									<td>HDPE (63,720%)</td>
									<td>:</td>
									<td><span id="reject_hdpe">N/A</span></td>
								</tr>
								<tr>
									<td>LDPE (34,319%)</td>
									<td>:</td>
									<td><span id="reject_ldpe">N/A</span></td>
								</tr>
								<tr>
									<td>MB Putih (1,471%)</td>
									<td>:</td>
									<td><span id="reject_mbputih">N/A</span></td>
								</tr>
								<tr>
									<td>MB Biru (0,490%)</td>
									<td>:</td>
									<td><span id="reject_mbbiru">N/A</span></td>
								</tr>
							</table>
						</div>
					</details>
					<details open> <!-- Lelehan Biru -->
						<summary><strong>Berat Lelehan Biru</strong></summary>
						<div>
							<table>
								<tr>
									<td><label for="blue_kg">Kg</label></td>
									<td>:</td>
									<td><input type="number" name="blue_kg" id="blue_kg" min="0"></td>
								</tr>
								<tr>
									<td><label for="blue_pcs">Pcs</label></td>
									<td>:</td>
									<td><input type="number" name="blue_pcs" id="blue_pcs" min="0"></td>
								</tr>
							</table>
							<br>
							<table>
								<tr>
									<td>HDPE (78,431%)</td>
									<td>:</td>
									<td><span id="blue_hdpe">N/A</span></td>
								</tr>
								<tr>
									<td>LDPE (19,608%)</td>
									<td>:</td>
									<td><span id="blue_ldpe">N/A</span></td>
								</tr>
								<tr>
									<td>MB Biru (1,961%)</td>
									<td>:</td>
									<td><span id="blue_mbbiru">N/A</span></td>
								</tr>
							</table>
						</div>
					</details>
					<details open> <!-- Cap & Lelehan Putih -->
						<summary><strong>Berat Putih (Cap & Lelehan)</strong></summary>
						<div>
							<div id="cap-lelehan-white">
								<div id="cap-white">
									<h5>Cap Putih</h5>
									<table>
										<tr>
											<td><label for="cap_white_kg">Kg</label></td>
											<td>:</td>
											<td><input type="number" name="cap_white_kg" id="cap_white_kg" min="0"></td>
										</tr>
										<tr>
											<td><label for="cap_white_pcs">Pcs</label></td>
											<td>:</td>
											<td><input type="number" name="cap_white_pcs" id="cap_white_pcs" min="0"></td>
										</tr>
									</table>
								</div>
								<div id="lelehan-white">
									<h5>Lelehan Putih</h5>
									<table>
										<tr>
											<td><label for="lelehan_white_kg">Kg</label></td>
											<td>:</td>
											<td><input type="number" name="lelehan_white_kg" id="lelehan_white_kg" min="0"></td>
										</tr>
										<tr>
											<td><label for="lelehan_white_pcs">Pcs</label></td>
											<td>:</td>
											<td><input type="number" name="lelehan_white_pcs" id="lelehan_white_pcs" min="0"></td>
										</tr>
									</table>
								</div>
							</div>
							<br>
							<h5>Cap & Lelehan Putih</h5>
							<table>
								<tr>
									<td>Kg</td>
									<td>:</td>
									<td><span id="white_kg">N/A</span></td>
								</tr>
								<tr>
									<td>Pcs</td>
									<td>:</td>
									<td><span id="white_pcs">N/A</span></td>
								</tr>
							</table>
							<br>
							<table>
								<tr>
									<td>HDPE (58,824%)</td>
									<td>:</td>
									<td><span id="white_hdpe">N/A</span></td>
								</tr>
								<tr>
									<td>LDPE (39,216%)</td>
									<td>:</td>
									<td><span id="white_ldpe">N/A</span></td>
								</tr>
								<tr>
									<td>MB Putih (1,961%)</td>
									<td>:</td>
									<td><span id="white_mbputih">N/A</span></td>
								</tr>
							</table>
						</div>
					</details>
					<details open id="total_reject"> <!-- Total -->
						<summary><strong>Total Reject</strong></summary>
						<div>
							<table>
								<tr>
									<td>Kg</td>
									<td>:</td>
									<td><span id="total_reject_kg">N/A</span></td>
								</tr>
								<tr>
									<td>Pcs</td>
									<td>:</td>
									<td><span id="total_reject_pcs">N/A</span></td>
								</tr>
							</table>
						</div>
					</details>
					<details open id="total"> <!-- Total -->
						<summary><strong>Total</strong></summary>
						<div>
							<table>
								<tr>
									<td>Pcs</td>
									<td>:</td>
									<td><span id="total_pcs">N/A</span></td>
								</tr>
								<tr>
									<td>Kg</td>
									<td>:</td>
									<td><span id="total_kg">N/A</span></td>
								</tr>
							</table>
							<br>
							<table style="width: 100%;">
								<tr>
									<td>HDPE : <span id="total_hdpe">N/A</span></td>
									<td>LDPE : <span id="total_ldpe">N/A</span></td>
									<td>MB Putih : <span id="total_mbputih">N/A</span></td>
									<td>MB Biru : <span id="total_mbbiru">N/A</span></td>
								</tr>
							</table>
						</div>
					</details>
				</section>
			</section>
		</main>
		<script>
			// PERSENTAGE ======================================================
			// Berat OK & Reject
			const HDPE_PERCENTAGE = 63.720;
			const LDPE_PERCENTAGE = 34.319;
			const MB_PUTIH_PERCENTAGE = 1.471;
			const MB_BIRU_PERCENTAGE = 0.490;
			// Berat Lelehan Biru
			const BLUE_HDPE_PERCENTAGE = 78.431;
			const BLUE_LDPE_PERCENTAGE = 19.608;
			const BLUE_MB_BIRU_PERCENTAGE = 1.961;
			// Berat Putih (Cap & Lelehan)
			const WHITE_HDPE_PERCENTAGE = 58.824;
			const WHITE_LDPE_PERCENTAGE = 39.216;
			const WHITE_MB_PUTIH_PERCENTAGE = 1.961;
			// Berat Satuan Pcs
			const BERAT_PER_PCS = 10.682;

			// DATA ============================================================
			function DATA_Construct(putih,biru) {
				this.pcs = 0;
				this.kg = 0;
				this.hdpe = 0;
				this.ldpe = 0;
				if (putih) { this.mb_putih = 0; }
				if (biru) { this.mb_biru = 0; }
			}
			var ok_DATA = new DATA_Construct(true,true)
			var reject_DATA = new DATA_Construct(true,true)
			var blue_DATA = new DATA_Construct(false,true)
			var white_DATA = new DATA_Construct(true,false)
			white_DATA.cap = { pcs:0, kg:0 }
			white_DATA.lelehan = { pcs:0, kg:0 }
			var total_reject_DATA = { pcs:0, kg:0 }
			var total_DATA = new DATA_Construct(true,true)

			// DOCUMENT IDs ===================================================
			var LMN_ID = id => document.getElementById(id)
			function ID_Construct(pcs,kg,hdpe,ldpe,mb_putih,mb_biru) {
				if (pcs) { this.pcs = LMN_ID(pcs); }
				if (kg) { this.kg = LMN_ID(kg); }
				if (hdpe) { this.hdpe = LMN_ID(hdpe); }
				if (ldpe) { this.ldpe = LMN_ID(ldpe); }
				if (mb_putih) { this.mb_putih = LMN_ID(mb_putih); }
				if (mb_biru) { this.mb_biru = LMN_ID(mb_biru); }
			}
			var ok_ID = new ID_Construct('ok_pcs','ok_kg','ok_hdpe','ok_ldpe','ok_mbputih','ok_mbbiru')
			var reject_ID = new ID_Construct('reject_pcs','reject_kg','reject_hdpe','reject_ldpe','reject_mbputih','reject_mbbiru')
			var blue_ID = new ID_Construct('blue_pcs','blue_kg','blue_hdpe','blue_ldpe','','blue_mbbiru')
			var white_ID = new ID_Construct('white_pcs','white_kg','white_hdpe','white_ldpe','white_mbputih','')
			white_ID.cap = { pcs:LMN_ID('cap_white_pcs'), kg:LMN_ID('cap_white_kg') }
			white_ID.lelehan = { pcs:LMN_ID('lelehan_white_pcs'), kg:LMN_ID('lelehan_white_kg') }
			var total_reject_ID = new ID_Construct('total_reject_pcs','total_reject_kg','','','','')
			var total_ID = new ID_Construct('total_pcs','total_kg','total_hdpe','total_ldpe','total_mbputih','total_mbbiru')
		
			// FUNCTIONS =======================================================
			function formatDecimal(value,isDecimal) {
				return parseFloat(value).toFixed(isDecimal ? 3 : 0)
			}
			function pcsToKg(pcs, beratPerPcs) {
				return pcs * beratPerPcs / 1000
			}
			function kgToPcs(kg, beratPerPcs) {
				return kg * 1000 / beratPerPcs
			}
			function showData(value,element) {
				if (element.tagName === 'INPUT') {
					element.value = value					
				} else {
					element.innerHTML = value					
				}
			}
			function isEmpty(value,isDecimal) {
				if (value === 0) {
					return ''
				} else {
					return formatDecimal(value,isDecimal)
				}
			}
			function isNA(value,isDecimal) {
				if (value === 0.000 || value === 0 || value === '0.000' || value === NaN || value === 'NaN') {
					return 'N/A'
				} else {
					return formatDecimal(value,isDecimal)
				}
			}
			function calculateMaterial(DATA,category) {
				let kg = DATA.kg
				switch (category) {
					case 'ok':
					case 'reject':
						DATA.hdpe = kg * HDPE_PERCENTAGE / 100
						DATA.ldpe = kg * LDPE_PERCENTAGE / 100
						DATA.mb_putih = kg * MB_PUTIH_PERCENTAGE / 100
						DATA.mb_biru = kg * MB_BIRU_PERCENTAGE / 100
						break;
					case 'blue':
						DATA.hdpe = kg * BLUE_HDPE_PERCENTAGE / 100
						DATA.ldpe = kg * BLUE_LDPE_PERCENTAGE / 100
						DATA.mb_biru = kg * BLUE_MB_BIRU_PERCENTAGE / 100
						break;
					case 'white':
						DATA.hdpe = kg * WHITE_HDPE_PERCENTAGE / 100
						DATA.ldpe = kg * WHITE_LDPE_PERCENTAGE / 100
						DATA.mb_putih = kg * WHITE_MB_PUTIH_PERCENTAGE / 100
						break;
				}
			}
			function showDataMaterial(DATA,ID) {
				showData(isNA(DATA.hdpe,true),ID.hdpe)
				showData(isNA(DATA.ldpe,true),ID.ldpe)
				if (DATA.mb_putih != undefined) { showData(isNA(DATA.mb_putih,true),ID.mb_putih) }
				if (DATA.mb_biru != undefined) { showData(isNA(DATA.mb_biru,true),ID.mb_biru) }
			}
			function calculateTotalReject() {
				total_reject_DATA.pcs = reject_DATA.pcs + blue_DATA.pcs + white_DATA.pcs
				total_reject_DATA.kg = reject_DATA.kg + blue_DATA.kg + white_DATA.kg
			}
			function showTotalReject() {
				showData(isNA(total_reject_DATA.pcs,false),total_reject_ID.pcs)
				showData(isNA(total_reject_DATA.kg,true),total_reject_ID.kg)
			}
			function calculateTotal() {
				total_DATA.pcs = ok_DATA.pcs + reject_DATA.pcs + blue_DATA.pcs + white_DATA.pcs
				total_DATA.kg = ok_DATA.kg + reject_DATA.kg + blue_DATA.kg + white_DATA.kg
				total_DATA.hdpe = ok_DATA.hdpe + reject_DATA.hdpe + blue_DATA.hdpe + white_DATA.hdpe
				total_DATA.ldpe = ok_DATA.ldpe + reject_DATA.ldpe + blue_DATA.ldpe + white_DATA.ldpe
				total_DATA.mb_putih = ok_DATA.mb_putih + reject_DATA.mb_putih + white_DATA.mb_putih
				total_DATA.mb_biru = ok_DATA.mb_biru + reject_DATA.mb_biru + blue_DATA.mb_biru
			}
			function showTotal() {
				showData(isNA(total_DATA.pcs,false),total_ID.pcs)
				showData(isNA(total_DATA.kg,true),total_ID.kg)
				showData(isNA(total_DATA.hdpe,true),total_ID.hdpe)
				showData(isNA(total_DATA.ldpe,true),total_ID.ldpe)
				showData(isNA(total_DATA.mb_putih,true),total_ID.mb_putih)
				showData(isNA(total_DATA.mb_biru,true),total_ID.mb_biru)
			}
		
			// Input Events
			// OK
			ok_ID.pcs.addEventListener('input', e => {
				ok_DATA.pcs = parseFloat(e.target.value != '' ? e.target.value : 0)
				ok_DATA.kg = pcsToKg(ok_DATA.pcs,BERAT_PER_PCS)
				showData(isEmpty(ok_DATA.kg,true),ok_ID.kg)
				calculateMaterial(ok_DATA,'ok')
				showDataMaterial(ok_DATA,ok_ID)
				calculateTotal()
				showTotal()
			})
			ok_ID.kg.addEventListener('input', e => {
				ok_DATA.kg = parseFloat(e.target.value != '' ? e.target.value : 0)
				ok_DATA.pcs = kgToPcs(ok_DATA.kg,BERAT_PER_PCS)
				showData(isEmpty(ok_DATA.pcs,false),ok_ID.pcs)
				calculateMaterial(ok_DATA,'ok')
				showDataMaterial(ok_DATA,ok_ID)
				calculateTotal()
				showTotal()
			})

			// Reject
			reject_ID.pcs.addEventListener('input', e => {
				reject_DATA.pcs = parseFloat(e.target.value != '' ? e.target.value : 0)
				reject_DATA.kg = pcsToKg(reject_DATA.pcs,BERAT_PER_PCS)
				showData(isEmpty(reject_DATA.kg,true),reject_ID.kg)
				calculateMaterial(reject_DATA,'reject')
				showDataMaterial(reject_DATA,reject_ID)
				calculateTotalReject()
				showTotalReject()
				calculateTotal()
				showTotal()
			})
			reject_ID.kg.addEventListener('input', e => {
				reject_DATA.kg = parseFloat(e.target.value != '' ? e.target.value : 0)
				reject_DATA.pcs = kgToPcs(reject_DATA.kg,BERAT_PER_PCS)
				showData(isEmpty(reject_DATA.pcs,false),reject_ID.pcs)
				calculateMaterial(reject_DATA,'reject')
				showDataMaterial(reject_DATA,reject_ID)
				calculateTotalReject()
				showTotalReject()
				calculateTotal()
				showTotal()
			})

			// Lelehan Biru
			blue_ID.pcs.addEventListener('input', e => {
				blue_DATA.pcs = parseFloat(e.target.value != '' ? e.target.value : 0)
				blue_DATA.kg = pcsToKg(blue_DATA.pcs,BERAT_PER_PCS)
				showData(isEmpty(blue_DATA.kg,true),blue_ID.kg)
				calculateMaterial(blue_DATA,'blue')
				showDataMaterial(blue_DATA,blue_ID)
				calculateTotalReject()
				showTotalReject()
				calculateTotal()
				showTotal()
			})
			blue_ID.kg.addEventListener('input', e => {
				blue_DATA.kg = parseFloat(e.target.value != '' ? e.target.value : 0)
				blue_DATA.pcs = kgToPcs(blue_DATA.kg,BERAT_PER_PCS)
				showData(isEmpty(blue_DATA.pcs,false),blue_ID.pcs)
				calculateMaterial(blue_DATA,'blue')
				showDataMaterial(blue_DATA,blue_ID)
				calculateTotalReject()
				showTotalReject()
				calculateTotal()
				showTotal()

			})

			// Cap & lelehan Putih
			function calculateWhite() {
				white_DATA.pcs = white_DATA.cap.pcs + white_DATA.lelehan.pcs
				white_DATA.kg = white_DATA.cap.kg + white_DATA.lelehan.kg
			}
			function showWhite() {
				showData(isNA(white_DATA.pcs,false),white_ID.pcs)
				showData(isNA(white_DATA.kg,true),white_ID.kg)
			}
			// Cap
			white_ID.cap.pcs.addEventListener('input', e => {
				white_DATA.cap.pcs = parseFloat(e.target.value != '' ? e.target.value : 0)
				white_DATA.cap.kg = pcsToKg(white_DATA.cap.pcs,BERAT_PER_PCS)
				showData(isEmpty(white_DATA.cap.kg,true),white_ID.cap.kg)
				calculateWhite()
				showWhite()
				calculateMaterial(white_DATA,'white')
				showDataMaterial(white_DATA,white_ID)
				calculateTotalReject()
				showTotalReject()
				calculateTotal()
				showTotal()
			})
			white_ID.cap.kg.addEventListener('input', e => {
				white_DATA.cap.kg = parseFloat(e.target.value != '' ? e.target.value : 0)
				white_DATA.cap.pcs = kgToPcs(white_DATA.cap.kg,BERAT_PER_PCS)
				showData(isEmpty(white_DATA.cap.pcs,false),white_ID.cap.pcs)
				calculateWhite()
				showWhite()
				calculateMaterial(white_DATA,'white')
				showDataMaterial(white_DATA,white_ID)
				calculateTotalReject()
				showTotalReject()
				calculateTotal()
				showTotal()
			})
			// Lelehan
			white_ID.lelehan.pcs.addEventListener('input', e => {
				white_DATA.lelehan.pcs = parseFloat(e.target.value != '' ? e.target.value : 0)
				white_DATA.lelehan.kg = pcsToKg(white_DATA.lelehan.pcs,BERAT_PER_PCS)
				showData(isEmpty(white_DATA.lelehan.kg,true),white_ID.lelehan.kg)
				calculateWhite()
				showWhite()
				calculateMaterial(white_DATA,'white')
				showDataMaterial(white_DATA,white_ID)
				calculateTotalReject()
				showTotalReject()
				calculateTotal()
				showTotal()
			})
			white_ID.lelehan.kg.addEventListener('input', e => {
				white_DATA.lelehan.kg = parseFloat(e.target.value != '' ? e.target.value : 0)
				white_DATA.lelehan.pcs = kgToPcs(white_DATA.lelehan.kg,BERAT_PER_PCS)
				showData(isEmpty(white_DATA.lelehan.pcs,false),white_ID.lelehan.pcs)
				calculateWhite()
				showWhite()
				calculateMaterial(white_DATA,'white')
				showDataMaterial(white_DATA,white_ID)
				calculateTotalReject()
				showTotalReject()
				calculateTotal()
				showTotal()
			})

		</script>
	</body>
</html>
